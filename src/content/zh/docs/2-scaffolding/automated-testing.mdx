---
title: "自动化测试框架"
---

import { Steps } from 'nextra/components'

# 自动化测试框架

> 让自动化测试为 AI 生成的代码验证正确性

## 核心理念

在 AI 辅助开发中，自动化测试工具的作用**并非被 AI 取代**，而是作为可靠的验证机制，融入 Agent 的反馈循环。

### AI + 测试协作闭环

<Steps>

### AI 生成代码

AI Agent 快速生成功能代码

### 运行测试套件

自动化测试检查功能正确性

### 获取失败报告

提取失败用例、预期值 vs 实际值

### AI 针对性修复

AI 根据具体错误信息定向修复

### 重复直至通过

循环直到所有测试通过

</Steps>

### 分工协作

| 角色 | 擅长的事 |
|-----|---------|
| **AI** | 快速生成功能代码、探索实现方案、重构逻辑 |
| **自动化测试** | 检查功能正确性、边界条件、回归问题、集成行为 |

这种分工比 "全交给 AI 自我验证" 更高效、更可靠：

- 测试提供**客观、可重复**的确定性反馈
- 避免 AI 的幻觉、自洽偏差或遗漏边缘案例
- 天然契合现有工程实践（CI/CD、TDD/BDD）

## 测试框架速查表

| 语言 | 单元测试 | 组件/集成测试 | E2E 测试 |
|-----|---------|--------------|---------|
| TypeScript | Vitest / Jest | Testing Library | Playwright / Cypress |
| Python | PyTest | PyTest | Playwright / Selenium |
| Java | JUnit 5 | Spring Boot Test | Selenium |
| Go | testing | testify | chromedp |

## JavaScript / TypeScript 测试

### 推荐框架

| 框架 | 类型 | 特点 | 推荐度 |
|-----|------|-----|-------|
| **Vitest** | 单元测试 | 快速、与 Vite 集成 | ⭐⭐⭐ |
| **Jest** | 单元测试 | 成熟、生态丰富 | ⭐⭐ |
| **Testing Library** | 组件测试 | 用户视角测试 | ⭐⭐⭐ |
| **Playwright** | E2E 测试 | 跨浏览器、可靠 | ⭐⭐⭐ |
| **Cypress** | E2E 测试 | 开发体验好 | ⭐⭐ |

## Python 测试

### 推荐框架

| 框架 | 类型 | 特点 | 推荐度 |
|-----|------|-----|-------|
| **PyTest** | 单元/集成 | 灵活、插件丰富 | ⭐⭐⭐ |
| **unittest** | 单元测试 | 标准库、稳定 | ⭐⭐ |
| **pytest-asyncio** | 异步测试 | 异步代码支持 | ⭐⭐⭐ |
| **pytest-cov** | 覆盖率 | 覆盖率报告 | ⭐⭐⭐ |

## Java 测试

| 框架 | 类型 | 特点 |
|-----|------|-----|
| **JUnit 5** | 单元测试 | 现代、功能丰富 |
| **Mockito** | Mock 框架 | 易用的 mock 支持 |
| **AssertJ** | 断言库 | 流式断言 API |
| **Spring Boot Test** | 集成测试 | Spring 生态集成 |

## 测试类型说明

| 类型 | 作用 | 速度 | 覆盖范围 |
|-----|------|-----|---------|
| **单元测试** | 测试单个函数/方法 | 🚀 最快 | 细粒度 |
| **组件测试** | 测试 UI 组件行为 | ⚡ 快 | 组件级 |
| **集成测试** | 测试模块间交互 | 🏃 中等 | 模块级 |
| **E2E 测试** | 测试完整用户流程 | 🐢 较慢 | 全局 |

## AI 协作最佳实践

### 测试驱动 AI 开发（TDD）

| 步骤 | 执行者 | 说明 |
|-----|-------|------|
| 1. 编写测试 | 人类 | 先定义期望行为 |
| 2. 实现代码 | AI | 根据测试实现功能 |
| 3. 运行测试 | 自动化 | 验证实现是否正确 |
| 4. 修复 | AI | 根据失败报告修复 |

### 向 AI 反馈测试失败

有效的反馈应包含：

| 信息 | 说明 |
|-----|------|
| **测试用例名** | 哪个测试失败了 |
| **期望值** | 预期的结果 |
| **实际值** | 实际得到的结果 |
| **相关代码位置** | 出问题的文件和行号 |
| **堆栈信息** | 错误堆栈（如有） |

### 覆盖率驱动

| 实践 | 说明 |
|-----|------|
| 生成覆盖率报告 | 了解哪些代码未被测试 |
| 设置覆盖率阈值 | 如 80% 行覆盖率 |
| 让 AI 补充测试 | 为未覆盖分支生成测试 |

## 配置检查清单

| 类别 | 检查项 |
|-----|-------|
| **框架** | ✅ 测试框架已安装和配置 |
| **环境** | ✅ 测试环境已隔离（如 jsdom） |
| **覆盖率** | ✅ 覆盖率工具已配置 |
| **CI 集成** | ✅ 测试在 CI 中自动运行 |
| **Mock** | ✅ Mock 工具已准备（如 vi.fn/Mock） |
| **数据** | ✅ 测试数据/fixtures 已组织 |

## 下一步

测试框架配置完成后，接下来设置 [CI/CD 流程](./ci-cd)来自动化整个开发流程。
