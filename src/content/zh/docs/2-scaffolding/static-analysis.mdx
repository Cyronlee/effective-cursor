---
title: "静态分析工具"
---

import { Steps } from 'nextra/components'

# 静态分析工具

> 让成熟的 Linter 为 AI 生成的代码把关

## 核心理念

在 AI 辅助开发中，成熟的静态分析工具（如 ESLint、Ruff、SpotBugs 等）的作用**并非被 AI 取代**，而是作为可靠的外部校验机制，融入 Agent 的反馈循环。

### AI + Linter 协作闭环

<Steps>

### AI 生成代码

AI Agent 快速生成功能代码

### Linter 检测问题

静态分析工具发现风格、bug、安全问题

### 反馈给 AI

将 Linter 报告提供给 AI

### AI 修复

AI 根据具体错误信息针对性修复

### 重复直至通过

循环直到所有检查通过

</Steps>

### 分工协作

| 角色 | 擅长的事 |
|-----|---------|
| **AI** | 快速生成代码、实现新功能、探索多种方案 |
| **Linter** | 精准捕捉风格不一致、潜在 bug、安全漏洞、性能问题 |

这种分工比 "全交给 AI 自我检查" 更高效、更可靠：

- Linter 提供**确定性、高覆盖率**的反馈
- 避免 AI 的幻觉或主观偏差
- 符合现代工程实践（CI/CD、预提交钩子）

## 工具选择速查表

| 语言 | Linter | Formatter | 类型检查 |
|-----|--------|-----------|---------|
| TypeScript | ESLint / Biome | Prettier / Biome | TypeScript 编译器 |
| Python | Ruff | Ruff / Black | MyPy / Pyright |
| Java | SpotBugs + Checkstyle | Google Java Format | Java 编译器 |
| Go | golangci-lint | gofmt | Go 编译器 |
| Rust | Clippy | rustfmt | Rust 编译器 |

## JavaScript / TypeScript 工具

### 推荐配置

| 工具 | 作用 | 推荐度 |
|-----|------|-------|
| **ESLint** | 代码质量检查 | ⭐⭐⭐ 成熟稳定 |
| **Prettier** | 代码格式化 | ⭐⭐⭐ 业界标准 |
| **Biome** | Lint + Format 一体化 | ⭐⭐ 新兴快速 |
| **TypeScript** | 类型检查 | ⭐⭐⭐ 必备 |

### 对 AI 特别有用的规则

| 规则 | 作用 |
|-----|------|
| `no-console` | AI 常留下调试代码 |
| `no-unused-vars` | AI 可能生成未使用变量 |
| `prefer-const` | 保持代码一致性 |
| `no-duplicate-imports` | AI 可能重复导入 |
| `no-explicit-any` | 强制类型安全 |

## Python 工具

### 推荐配置

| 工具 | 作用 | 推荐度 |
|-----|------|-------|
| **Ruff** | Lint + Format | ⭐⭐⭐ 极快、兼容多种规则 |
| **Black** | 代码格式化 | ⭐⭐ 固执但一致 |
| **MyPy** | 静态类型检查 | ⭐⭐⭐ 类型安全必备 |
| **Pyright** | 类型检查 | ⭐⭐ 更快的替代 |

## Java 工具

| 工具 | 作用 |
|-----|------|
| **SpotBugs** | 查找潜在 bug |
| **Checkstyle** | 代码风格检查 |
| **PMD** | 代码质量检查 |
| **Error Prone** | 编译时 bug 检测 |

## 预提交钩子

在代码提交前自动运行检查，防止问题代码进入仓库：

| 工具 | 适用语言 | 说明 |
|-----|---------|------|
| **Husky + lint-staged** | JS/TS | 只检查暂存文件，速度快 |
| **pre-commit** | Python/通用 | 多语言支持，配置灵活 |
| **lefthook** | 通用 | Go 编写，极快 |

## 编辑器集成

确保工具与 Cursor 集成，实现**实时反馈**：

| 配置项 | 作用 |
|-------|------|
| `editor.formatOnSave` | 保存时自动格式化 |
| `source.fixAll.eslint` | 保存时自动修复 ESLint 问题 |
| `source.organizeImports` | 保存时自动整理导入 |

## AI 协作最佳实践

| 实践 | 说明 |
|-----|------|
| **将错误反馈给 AI** | 复制 Linter 报告让 AI 修复 |
| **在 Cursor Rules 中声明** | 告知 AI 项目使用的工具链 |
| **使用自动修复** | 运行 `--fix` 自动修复简单问题 |
| **关注高优先级问题** | 错误 > 警告，安全 > 风格 |

## 配置检查清单

| 类别 | 检查项 |
|-----|-------|
| **Linter** | ✅ ESLint/Ruff/SpotBugs 已配置 |
| **Formatter** | ✅ Prettier/Ruff/gofmt 已配置 |
| **类型检查** | ✅ TypeScript/MyPy 已启用严格模式 |
| **编辑器** | ✅ 保存时自动格式化和修复 |
| **Git 钩子** | ✅ pre-commit 钩子已配置 |
| **CI** | ✅ 流水线中包含 lint 检查 |

## 下一步

静态分析工具配置完成后，接下来设置[自动化测试框架](./automated-testing)来验证功能正确性。
