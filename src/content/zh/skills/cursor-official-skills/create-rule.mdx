---
title: "create-rule - 创建 Cursor Rules"
---

import { Callout, Tabs } from 'nextra/components'

# create-rule

<Callout type="info">
**Skill 名称**: create-rule  
**调用方式**: 自动触发 / `/create-rule`  
**用途**: 创建 Cursor Rules 以提供持久的 AI 指导
</Callout>

## Skill 描述

为 AI 代理创建持久性指导 Rules。当用户想创建 Rule、添加编码标准、设置项目约定、配置文件特定模式、创建 RULE.md 文件，或询问 .cursor/rules/ 或 AGENTS.md 时使用。

## 完整 Skill 文档

<Tabs items={['中文翻译', '英文原文']}>
<Tabs.Tab>

````markdown
---
name: create-rule
description: 为 AI 代理创建持久性指导规则。当用户想创建规则、添加编码标准、设置项目约定、配置文件特定模式、创建 RULE.md 文件，或询问 .cursor/rules/ 或 AGENTS.md 时使用。
---
# 创建 Cursor Rules

在 `.cursor/rules/` 中创建项目规则，为 AI 代理提供持久性上下文。

## 收集需求

创建规则前，需要确定：

1. **目的**: 此规则应该强制执行或教授什么？
2. **作用域**: 应该始终应用，还是仅针对特定文件？
3. **文件模式**: 如果是文件特定的，使用哪些 glob 模式？

### 从上下文推断

如果有之前的对话上下文，从讨论的内容推断规则。如果对话涵盖不同的主题或模式，可以创建多个规则。如果上下文已经提供了答案，不要问冗余问题。

### 必需的问题

如果用户没有指定作用域，询问：
- "此规则应该始终应用，还是仅在处理特定文件时应用？"

如果他们提到了特定文件但没有提供具体模式，询问：
- "此规则应该应用于哪些文件模式？"（例如，`**/*.ts`、`backend/**/*.py`）

明确文件模式非常重要。

可用时使用 AskQuestion 工具高效收集这些信息。

---

## 规则文件格式

规则是 `.cursor/rules/` 中带有 YAML frontmatter 的 `.mdc` 文件：

```
.cursor/rules/
  typescript-standards.mdc
  react-patterns.mdc
  api-conventions.mdc
```

### 文件结构

```markdown
---
description: 此规则的简要描述
globs: **/*.ts  # 文件特定规则的文件模式
alwaysApply: false  # 如果规则应始终应用，设置为 true
---

# 规则标题

你的规则内容...
```

### Frontmatter 字段

| 字段 | 类型 | 描述 |
|-------|------|-------------|
| `description` | string | 规则的作用（显示在规则选择器中） |
| `globs` | string | 文件模式 - 当匹配的文件打开时应用规则 |
| `alwaysApply` | boolean | 如果为 true，应用于每个会话 |

---

## 规则配置

### 始终应用

对于应适用于每次对话的通用标准：

```yaml
---
description: 项目的核心编码标准
alwaysApply: true
---
```

### 应用于特定文件

对于在处理特定文件类型时应用的规则：

```yaml
---
description: 此项目的 TypeScript 约定
globs: **/*.ts
alwaysApply: false
---
```

---

## 最佳实践

### 保持规则简洁

- **少于 50 行**: 规则应该简洁明了
- **每个规则一个关注点**: 将大规则拆分为专注的小块
- **可操作**: 像清晰的内部文档一样编写
- **具体示例**: 理想情况下提供如何修复问题的具体示例

---

## 示例规则

### TypeScript 标准

```markdown
---
description: TypeScript 编码标准
globs: **/*.ts
alwaysApply: false
---

# 错误处理

\`\`\`typescript
// ❌ 不好
try {
  await fetchData();
} catch (e) {}

// ✅ 好
try {
  await fetchData();
} catch (e) {
  logger.error('Failed to fetch', { error: e });
  throw new DataFetchError('Unable to retrieve data', { cause: e });
}
\`\`\`
```

### React 模式

```markdown
---
description: React 组件模式
globs: **/*.tsx
alwaysApply: false
---

# React 模式

- 使用函数组件
- 提取自定义 hooks 以实现可重用逻辑
- 将样式与组件放在一起
```

---

## 检查清单

- [ ] 文件是 `.cursor/rules/` 中的 `.mdc` 格式
- [ ] Frontmatter 配置正确
- [ ] 内容少于 500 行
- [ ] 包含具体示例
````

</Tabs.Tab>
<Tabs.Tab>

````markdown
---
name: create-rule
description: Create Cursor rules for persistent AI guidance. Use when the user wants to create a rule, add coding standards, set up project conventions, configure file-specific patterns, create RULE.md files, or asks about .cursor/rules/ or AGENTS.md.
---
# Creating Cursor Rules

Create project rules in `.cursor/rules/` to provide persistent context for the AI agent.

## Gather Requirements

Before creating a rule, determine:

1. **Purpose**: What should this rule enforce or teach?
2. **Scope**: Should it always apply, or only for specific files?
3. **File patterns**: If file-specific, which glob patterns?

### Inferring from Context

If you have previous conversation context, infer rules from what was discussed. You can create multiple rules if the conversation covers distinct topics or patterns. Don't ask redundant questions if the context already provides the answers.

### Required Questions

If the user hasn't specified scope, ask:
- "Should this rule always apply, or only when working with specific files?"

If they mentioned specific files and haven't provided concrete patterns, ask:
- "Which file patterns should this rule apply to?" (e.g., `**/*.ts`, `backend/**/*.py`)

It's very important that we get clarity on the file patterns.

Use the AskQuestion tool when available to gather this efficiently.

---

## Rule File Format

Rules are `.mdc` files in `.cursor/rules/` with YAML frontmatter:

```
.cursor/rules/
  typescript-standards.mdc
  react-patterns.mdc
  api-conventions.mdc
```

### File Structure

```markdown
---
description: Brief description of what this rule does
globs: **/*.ts  # File pattern for file-specific rules
alwaysApply: false  # Set to true if rule should always apply
---

# Rule Title

Your rule content here...
```

### Frontmatter Fields

| Field | Type | Description |
|-------|------|-------------|
| `description` | string | What the rule does (shown in rule picker) |
| `globs` | string | File pattern - rule applies when matching files are open |
| `alwaysApply` | boolean | If true, applies to every session |

---

## Rule Configurations

### Always Apply

For universal standards that should apply to every conversation:

```yaml
---
description: Core coding standards for the project
alwaysApply: true
---
```

### Apply to Specific Files

For rules that apply when working with certain file types:

```yaml
---
description: TypeScript conventions for this project
globs: **/*.ts
alwaysApply: false
---
```

---

## Best Practices

### Keep Rules Concise

- **Under 50 lines**: Rules should be concise and to the point
- **One concern per rule**: Split large rules into focused pieces
- **Actionable**: Write like clear internal docs
- **Concrete examples**: Ideally provide concrete examples of how to fix issues

---

## Example Rules

### TypeScript Standards

```markdown
---
description: TypeScript coding standards
globs: **/*.ts
alwaysApply: false
---

# Error Handling

\`\`\`typescript
// ❌ BAD
try {
  await fetchData();
} catch (e) {}

// ✅ GOOD
try {
  await fetchData();
} catch (e) {
  logger.error('Failed to fetch', { error: e });
  throw new DataFetchError('Unable to retrieve data', { cause: e });
}
\`\`\`
```

### React Patterns

```markdown
---
description: React component patterns
globs: **/*.tsx
alwaysApply: false
---

# React Patterns

- Use functional components
- Extract custom hooks for reusable logic
- Colocate styles with components
```

---

## Checklist

- [ ] File is `.mdc` format in `.cursor/rules/`
- [ ] Frontmatter configured correctly
- [ ] Content under 500 lines
- [ ] Includes concrete examples
````

</Tabs.Tab>
</Tabs>

## 使用场景

当你想要做以下事情时，Agent 会自动调用此 Skill：

- 创建新的 Rule
- 添加编码规范
- 设置项目约定
- 配置文件特定的模式
- 创建 RULE.md 文件
- 询问 `.cursor/rules/` 或 `AGENTS.md`

## 相关文档

- [Cursor Rules 指南](/zh/docs/3-cursor-rules)
- [Rules 最佳实践](/zh/docs/3-cursor-rules/best-practices)
- [Rules 模板库](/zh/rules)
